关于 DSL
===

## 为什么要开发一种DSL
1. 我们需要状态机但又讨厌它.
    (...)
2. 我们把服务串联起来再抽象.
    (...)
3. 我们必须给你(开发者)做一些限制.
    (...)
4. 我们为什么不用现成的好东西, 如 `uml`.
    (...)

## 如何解决现实问题
1. 常见的注册流程
```ditaa {cmd=true args=["-E"]}
            +----------------------+   +------------+   +---------------+   +------------+  
 start -+-> | send validation code +->>| verifyCode +-->| createAccount +-->| sendNotify +--> end
        |   +----------+-----------+   +------------+   +---------------+   +------------+
        |              |
        +------<<------+
```
1. 审批流程
```ditaa {cmd=true args=["-E"]}
         +--------------------+
 start > | create application ||> 
         +--------------------+
```

## 对处理流程的抽象概括
包括但不限于(随时可以补充或修改)以下几种:
1. 瀑布流程 `waterfall`  
   A -> B  (串行, B 期待 A 的结果)
   当 A 执行结束后, 可以以主动或被动的方式调用 B 操作;
   任何一个工作流都是一个 `waterfall` 流程;
2. *串行流程 `series`  
   不关心上一个操作的结果, 用于优化分配工作的方式
3. 并行集合流程 `parallel` (A & B)  
   A 和 B 可以同时被调用, 必须全部通过;
4. 并行分支流程 `race` (A \ B)  
   A 和 B 可以同时被调用, 但只能有一个能通过, 其它操作的结果将被丢弃.
   例如注册流程, 如有两种或以上的认证方式(phone number & OAuth), 客户可以同时尝试这两种方式, 但只有一个会成功.
   默认的分支流程都是可并行的(不锁定其他操作).
5. 有限分支流程 A \ B  
   A 和 B 同时只能有一个被调用
   A 被调用时, B 操作将不能执行
   有限分支只能主动调用, 不能自动执行(除非设置了重试次数)
6. 并行重复流程  A{n}  
   重复执行 A 操作, 成功 n 次后流转


>PS: 我们的DSL需要一个名字, 如:   
>> 1. `zerumbet workflow language`, 文件名缩写 `.zwl`; 
>> 2. `workflow description language`, `.wdl`;
